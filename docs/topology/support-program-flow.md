# 지원사업 관리 워크플로우 (Support Program Flow)

## 기본 정보

| 항목 | 값 |
|------|-----|
| **워크플로우 ID** | `WF-BIZ-001` |
| **버전** | 1.0.0 |
| **카테고리** | 지원사업 |
| **트리거 유형** | Schedule + Event |
| **SLA** | 모니터링: 24시간, 신청준비: 마감 7일 전 |
| **자동화 수준** | Semi-Auto |
| **우선순위** | Medium |
| **담당 에이전트** | BizSupportAgent |
| **최종 수정** | 2025-01-26 |

---

## 트리거 조건

### 스케줄 트리거 (Schedule Trigger)

```yaml
# 지원사업 모니터링
program_monitoring:
  cron: "0 9 * * 1,3,5"  # 월,수,금 오전 9시
  timezone: "Asia/Seoul"
  enabled: true

# 마감 체크
deadline_check:
  cron: "0 10 * * *"  # 매일 오전 10시
  timezone: "Asia/Seoul"
  enabled: true

# 주간 요약
weekly_summary:
  cron: "0 9 * * 1"  # 매주 월요일 오전 9시
  timezone: "Asia/Seoul"
  enabled: true
```

### 이벤트 트리거 (Event Trigger)

| 이벤트명 | 소스 | 조건 | 설명 |
|----------|------|------|------|
| `program.found` | 크롤러 | 적합도 ≥ 80% | 우수 적합 사업 발견 |
| `application.approved` | 수동 입력 | 선정 통보 | 사후관리 시작 |

---

## 프로세스 흐름

### 전체 라이프사이클

```mermaid
stateDiagram-v2
    [*] --> 모니터링: 크롤링 시작

    모니터링 --> 적합성분석: 사업 발견
    적합성분석 --> 관심목록: 적합도 ≥ 60%
    적합성분석 --> 모니터링: 적합도 < 60%

    관심목록 --> 신청준비: 신청 결정
    관심목록 --> 모니터링: 마감 경과

    신청준비 --> 서류준비: 준비 시작
    서류준비 --> 사업계획서작성: 서류 완료
    사업계획서작성 --> 신청완료: 제출 완료
    신청완료 --> 심사대기: 접수 확인

    심사대기 --> 선정: 선정 통보
    심사대기 --> 탈락: 탈락 통보

    선정 --> 사업수행: 협약 체결
    사업수행 --> 정산: 사업 종료
    정산 --> [*]: 완료

    탈락 --> 모니터링: 다음 차수 검토
```

### 모니터링 플로우

```mermaid
sequenceDiagram
    autonumber
    participant Schedule as 스케줄러
    participant MON as SupportMonitoring
    participant DB as Database
    participant CEO as 대표 알림

    Schedule->>MON: 1. 모니터링 시작
    MON->>MON: 2. 크롤링 소스 순회

    loop 각 소스
        MON->>MON: 3. 페이지 크롤링
        MON->>MON: 4. 지원사업 파싱
        MON->>MON: 5. 적합성 분석
    end

    MON->>DB: 6. 발견 사업 저장
    MON->>MON: 7. 적합 사업 필터링

    alt 우수 적합 사업 발견
        MON->>CEO: 8a. 알림 발송
    else 일반 사업만 발견
        MON->>DB: 8b. 목록 업데이트
    end
```

### 신청 준비 플로우

```mermaid
sequenceDiagram
    autonumber
    participant CEO as 대표
    participant APP as ApplicationSupport
    participant DB as Database
    participant EXT as 외부 시스템

    CEO->>APP: 1. 신청 지시
    APP->>DB: 2. 지원사업 정보 조회
    DB-->>APP: 3. 사업 정보 반환

    APP->>APP: 4. 필요 서류 목록 생성
    APP->>DB: 5. 기존 서류 조회
    DB-->>APP: 6. 보유 서류 반환

    APP->>APP: 7. 서류 준비 상태 체크

    loop 미비 서류
        APP->>CEO: 8. 서류 준비 요청
        CEO-->>APP: 9. 서류 제공
        APP->>DB: 10. 서류 저장
    end

    APP->>APP: 11. 사업계획서 초안 생성
    APP->>CEO: 12. 검토 요청
    CEO-->>APP: 13. 승인/수정요청

    APP->>EXT: 14. 신청서 제출
    EXT-->>APP: 15. 접수 확인
    APP->>DB: 16. 신청 완료 저장
```

---

## 단계별 상세

### Step 1: 지원사업 모니터링

| 항목 | 내용 |
|------|------|
| **Step ID** | `BIZ-STEP-001` |
| **담당 에이전트** | `SupportMonitoringSubAgent` |
| **설명** | 주요 지원사업 사이트 크롤링 및 적합성 분석 |
| **SLA** | 30분 |

**크롤링 소스**

| 소스 | URL | 우선순위 |
|------|-----|----------|
| K-Startup | k-startup.go.kr | 1 |
| 소상공인마당 | sbiz.or.kr | 2 |
| 소상공인시장진흥공단 | semas.or.kr | 3 |
| 중소벤처기업부 | mss.go.kr | 4 |
| 서울산업진흥원 | sba.seoul.kr | 5 |

**적합성 분석 기준**

| 조건 | 가중치 | 평가 방법 |
|------|--------|----------|
| 기업 규모 | 20% | 중소기업 해당 여부 |
| 업종 | 25% | 유아용품/이커머스 해당 |
| 지역 | 15% | 전국/서울 해당 |
| 업력 | 20% | 요건 충족 여부 |
| 매출/인원 | 20% | 요건 충족 여부 |

### Step 2: 서류 준비

| 항목 | 내용 |
|------|------|
| **Step ID** | `BIZ-STEP-002` |
| **담당 에이전트** | `ApplicationSupportSubAgent` |
| **설명** | 신청 필요 서류 목록화 및 준비 현황 관리 |

**공통 필요 서류**

| 서류 | 필수 | 유효기간 |
|------|:----:|---------|
| 사업자등록증 | O | - |
| 법인등기부등본 | O | 3개월 |
| 중소기업확인서 | O | 1년 |
| 재무제표 (3개년) | O | - |
| 국세/지방세 납세증명서 | O | 1개월 |
| 4대보험 가입증명서 | △ | 1개월 |

### Step 3: 사업계획서 작성

| 항목 | 내용 |
|------|------|
| **Step ID** | `BIZ-STEP-003` |
| **담당 에이전트** | `ApplicationSupportSubAgent` |
| **설명** | AI 기반 사업계획서 초안 작성 |

**사업계획서 구성**

1. 회사 개요
2. 사업 개요 및 목표
3. 추진 전략 및 방법
4. 추진 일정
5. 예산 계획
6. 기대 효과

### Step 4: 사후관리

| 항목 | 내용 |
|------|------|
| **Step ID** | `BIZ-STEP-004` |
| **담당 에이전트** | `PostManagementSubAgent` |
| **설명** | 선정 후 수행 관리, 정산, 결과보고 |

**관리 항목**

| 항목 | 주기 | 담당 |
|------|------|------|
| 마일스톤 점검 | 월 1회 | 자동 알림 |
| 예산 집행 현황 | 실시간 | 자동 집계 |
| 중간 보고서 | 사업 중간 | 초안 생성 |
| 정산 보고서 | 사업 종료 | 초안 생성 |
| 결과 보고서 | 사업 종료 | 초안 생성 |

---

## 예외 처리

### 예외 유형 및 처리 방법

| 예외 코드 | 예외 유형 | 원인 | 처리 방법 |
|----------|----------|------|----------|
| `BIZ-E001` | 크롤링 실패 | 사이트 변경/차단 | 수동 확인 요청 |
| `BIZ-E002` | 서류 미비 | 준비 지연 | 마감 알림 강화 |
| `BIZ-E003` | 정산 오류 | 증빙 불일치 | 수정 요청 |

---

## 알림 설정

| 시점 | 채널 | 대상 | 조건 |
|------|------|------|------|
| 우수 적합 사업 발견 | 슬랙 | 대표 | 적합도 ≥ 80% |
| 신청 마감 7일 전 | 슬랙, 이메일 | 대표 | 관심 목록 사업 |
| 서류 마감 3일 전 | 슬랙 | 대표 | 미비 서류 존재 |
| 정산 마감 7일 전 | 슬랙, 이메일 | 대표 | 수행중 사업 |

---

## KPI (핵심 성과 지표)

| 지표명 | 측정 방법 | 목표치 |
|--------|----------|--------|
| 적합 사업 발굴률 | 발견/신청 비율 | 30% |
| 선정률 | 선정/신청 비율 | 40% |
| 정산 완료율 | 기한 내 완료 | 100% |
| 연간 지원금 확보 | 총 확보 금액 | 1억원 |

---

## 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0.0 | 2025-01-26 | AI Agent | 초기 문서 작성 |

---

## 참고 문서

- [BizSupport Agent 문서](../agents/07-biz-support/index.md)
